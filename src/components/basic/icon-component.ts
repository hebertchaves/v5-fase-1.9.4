// src/components/basic/icon-component.ts (atualizado)
import { QuasarNode, PluginSettings } from '../../types/settings';
import { extractStylesAndProps } from '../../utils/quasar-utils';
import { applyStylesToFigmaNode, createText } from '../../utils/figma-utils';
import { quasarColors } from '../../data/color-map';
import { logDebug } from '../../utils/logger.js';

// Mapeamento para Ã­cones Material Design
const materialIconsMap: Record<string, string> = {

'3d_rotation': '\uE84D',
'ac_unit': '\uEB3B',
'access_alarm': '\uE190',
'access_alarms': '\uE191',
'access_time': '\uE192',
'accessibility': '\uE84E',
'accessible': '\uE914',
'account_balance': '\uE84F',
'account_balance_wallet': '\uE850',
'account_box': '\uE851',
'account_circle': '\uE853',
'adb': '\uE60E',
'add': '\uE145',
'add_a_photo': '\uE439',
'add_alarm': '\uE193',
'add_alert': '\uE003',
'add_box': '\uE146',
'add_circle': '\uE147',
'add_circle_outline': '\uE148',
'add_location': '\uE567',
'add_shopping_cart': '\uE854',
'add_to_photos': '\uE39D',
'add_to_queue': '\uE05C',
'adjust': '\uE39E',
'airline_seat_flat': '\uE630',
'airline_seat_flat_angled': '\uE631',
'airline_seat_individual_suite': '\uE632',
'airline_seat_legroom_extra': '\uE633',
'airline_seat_legroom_normal': '\uE634',
'airline_seat_legroom_reduced': '\uE635',
'airline_seat_recline_extra': '\uE636',
'airline_seat_recline_normal': '\uE637',
'airplanemode_active': '\uE195',
'airplanemode_inactive': '\uE194',
'airplay': '\uE055',
'airport_shuttle': '\uEB3C',
'alarm': '\uE855',
'alarm_add': '\uE856',
'alarm_off': '\uE857',
'alarm_on': '\uE858',
'album': '\uE019',
'all_inclusive': '\uEB3D',
'all_out': '\uE90B',
'android': '\uE859',
'announcement': '\uE85A',
'apps': '\uE5C3',
'archive': '\uE149',
'arrow_back': '\uE5C4',
'arrow_downward': '\uE5DB',
'arrow_drop_down': '\uE5C5',
'arrow_drop_down_circle': '\uE5C6',
'arrow_drop_up': '\uE5C7',
'arrow_forward': '\uE5C8',
'arrow_upward': '\uE5D8',
'art_track': '\uE060',
'aspect_ratio': '\uE85B',
'assessment': '\uE85C',
'assignment': '\uE85D',
'assignment_ind': '\uE85E',
'assignment_late': '\uE85F',
'assignment_return': '\uE860',
'assignment_returned': '\uE861',
'assignment_turned_in': '\uE862',
'assistant': '\uE39F',
'assistant_photo': '\uE3A0',
'attach_file': '\uE226',
'attach_money': '\uE227',
'attachment': '\uE2BC',
'audiotrack': '\uE3A1',
'autorenew': '\uE863',
'av_timer': '\uE01B',
'backspace': '\uE14A',
'backup': '\uE864',
'battery_alert': '\uE19C',
'battery_charging_full': '\uE1A3',
'battery_full': '\uE1A4',
'battery_std': '\uE1A5',
'battery_unknown': '\uE1A6',
'beach_access': '\uEB3E',
'beenhere': '\uE52D',
'block': '\uE14B',
'bluetooth': '\uE1A7',
'bluetooth_audio': '\uE60F',
'bluetooth_connected': '\uE1A8',
'bluetooth_disabled': '\uE1A9',
'bluetooth_searching': '\uE1AA',
'blur_circular': '\uE3A2',
'blur_linear': '\uE3A3',
'blur_off': '\uE3A4',
'blur_on': '\uE3A5',
'book': '\uE865',
'bookmark': '\uE866',
'bookmark_border': '\uE867',
'border_all': '\uE228',
'border_bottom': '\uE229',
'border_clear': '\uE22A',
'border_color': '\uE22B',
'border_horizontal': '\uE22C',
'border_inner': '\uE22D',
'border_left': '\uE22E',
'border_outer': '\uE22F',
'border_right': '\uE230',
'border_style': '\uE231',
'border_top': '\uE232',
'border_vertical': '\uE233',
'branding_watermark': '\uE06B',
'brightness_1': '\uE3A6',
'brightness_2': '\uE3A7',
'brightness_3': '\uE3A8',
'brightness_4': '\uE3A9',
'brightness_5': '\uE3AA',
'brightness_6': '\uE3AB',
'brightness_7': '\uE3AC',
'brightness_auto': '\uE1AB',
'brightness_high': '\uE1AC',
'brightness_low': '\uE1AD',
'brightness_medium': '\uE1AE',
'broken_image': '\uE3AD',
'brush': '\uE3AE',
'bubble_chart': '\uE6DD',
'bug_report': '\uE868',
'build': '\uE869',
'burst_mode': '\uE43C',
'business': '\uE0AF',
'business_center': '\uEB3F',
'cached': '\uE86A',
'cake': '\uE7E9',
'call': '\uE0B0',
'call_end': '\uE0B1',
'call_made': '\uE0B2',
'call_merge': '\uE0B3',
'call_missed': '\uE0B4',
'call_missed_outgoing': '\uE0E4',
'call_received': '\uE0B5',
'call_split': '\uE0B6',
'call_to_action': '\uE06C',
'camera': '\uE3AF',
'camera_alt': '\uE3B0',
'camera_enhance': '\uE8FC',
'camera_front': '\uE3B1',
'camera_rear': '\uE3B2',
'camera_roll': '\uE3B3',
'cancel': '\uE5C9',
'card_giftcard': '\uE8F6',
'card_membership': '\uE8F7',
'card_travel': '\uE8F8',
'casino': '\uEB40',
'cast': '\uE307',
'cast_connected': '\uE308',
'center_focus_strong': '\uE3B4',
'center_focus_weak': '\uE3B5',
'change_history': '\uE86B',
'chat': '\uE0B7',
'chat_bubble': '\uE0CA',
'chat_bubble_outline': '\uE0CB',
'check': '\uE5CA',
'check_box': '\uE834',
'check_box_outline_blank': '\uE835',
'check_circle': '\uE86C',
'chevron_left': '\uE5CB',
'chevron_right': '\uE5CC',
'child_care': '\uEB41',
'child_friendly': '\uEB42',
'chrome_reader_mode': '\uE86D',
'class': '\uE86E',
'clear': '\uE14C',
'clear_all': '\uE0B8',
'close': '\uE5CD',
'closed_caption': '\uE01C',
'cloud': '\uE2BD',
'cloud_circle': '\uE2BE',
'cloud_done': '\uE2BF',
'cloud_download': '\uE2C0',
'cloud_off': '\uE2C1',
'cloud_queue': '\uE2C2',
'cloud_upload': '\uE2C3',
'code': '\uE86F',
'collections': '\uE3B6',
'collections_bookmark': '\uE431',
'color_lens': '\uE3B7',
'colorize': '\uE3B8',
'comment': '\uE0B9',
'compare': '\uE3B9',
'compare_arrows': '\uE915',
'computer': '\uE30A',
'confirmation_number': '\uE638',
'contact_mail': '\uE0D0',
'contact_phone': '\uE0CF',
'contacts': '\uE0BA',
'content_copy': '\uE14D',
'content_cut': '\uE14E',
'content_paste': '\uE14F',
'control_point': '\uE3BA',
'control_point_duplicate': '\uE3BB',
'copyright': '\uE90C',
'create': '\uE150',
'create_new_folder': '\uE2CC',
'credit_card': '\uE870',
'crop': '\uE3BE',
'crop_16_9': '\uE3BC',
'crop_3_2': '\uE3BD',
'crop_5_4': '\uE3BF',
'crop_7_5': '\uE3C0',
'crop_din': '\uE3C1',
'crop_free': '\uE3C2',
'crop_landscape': '\uE3C3',
'crop_original': '\uE3C4',
'crop_portrait': '\uE3C5',
'crop_rotate': '\uE437',
'crop_square': '\uE3C6',
'dashboard': '\uE871',
'data_usage': '\uE1AF',
'date_range': '\uE916',
'dehaze': '\uE3C7',
'delete': '\uE872',
'delete_forever': '\uE92B',
'delete_sweep': '\uE16C',
'description': '\uE873',
'desktop_mac': '\uE30B',
'desktop_windows': '\uE30C',
'details': '\uE3C8',
'developer_board': '\uE30D',
'developer_mode': '\uE1B0',
'device_hub': '\uE335',
'devices': '\uE1B1',
'devices_other': '\uE337',
'dialer_sip': '\uE0BB',
'dialpad': '\uE0BC',
'directions': '\uE52E',
'directions_bike': '\uE52F',
'directions_boat': '\uE532',
'directions_bus': '\uE530',
'directions_car': '\uE531',
'directions_railway': '\uE534',
'directions_run': '\uE566',
'directions_subway': '\uE533',
'directions_transit': '\uE535',
'directions_walk': '\uE536',
'disc_full': '\uE610',
'dns': '\uE875',
'do_not_disturb': '\uE612',
'do_not_disturb_alt': '\uE611',
'do_not_disturb_off': '\uE643',
'do_not_disturb_on': '\uE644',
'dock': '\uE30E',
'domain': '\uE7EE',
'done': '\uE876',
'done_all': '\uE877',
'donut_large': '\uE917',
'donut_small': '\uE918',
'drafts': '\uE151',
'drag_handle': '\uE25D',
'drive_eta': '\uE613',
'dvr': '\uE1B2',
'edit': '\uE3C9',
'edit_location': '\uE568',
'eject': '\uE8FB',
'email': '\uE0BE',
'enhanced_encryption': '\uE63F',
'equalizer': '\uE01D',
'error': '\uE000',
'error_outline': '\uE001',
'euro_symbol': '\uE926',
'ev_station': '\uE56D',
'event': '\uE878',
'event_available': '\uE614',
'event_busy': '\uE615',
'event_note': '\uE616',
'event_seat': '\uE903',
'exit_to_app': '\uE879',
'expand_less': '\uE5CE',
'expand_more': '\uE5CF',
'explicit': '\uE01E',
'explore': '\uE87A',
'exposure': '\uE3CA',
'exposure_neg_1': '\uE3CB',
'exposure_neg_2': '\uE3CC',
'exposure_plus_1': '\uE3CD',
'exposure_plus_2': '\uE3CE',
'exposure_zero': '\uE3CF',
'extension': '\uE87B',
'face': '\uE87C',
'fast_forward': '\uE01F',
'fast_rewind': '\uE020',
'favorite': '\uE87D',
'favorite_border': '\uE87E',
'featured_play_list': '\uE06D',
'featured_video': '\uE06E',
'feedback': '\uE87F',
'fiber_dvr': '\uE05D',
'fiber_manual_record': '\uE061',
'fiber_new': '\uE05E',
'fiber_pin': '\uE05E',

'fiber_smart_record': '\uE062',
'file_download': '\uE2C4',
'file_upload': '\uE2C6',
'filter': '\uE3D3',
'filter_1': '\uE3D0',
'filter_2': '\uE3D1',
'filter_3': '\uE3D2',
'filter_4': '\uE3D4',
'filter_5': '\uE3D5',
'filter_6': '\uE3D6',
'filter_7': '\uE3D7',
'filter_8': '\uE3D8',
'filter_9': '\uE3D9',
'filter_9_plus': '\uE3DA',
'filter_b_and_w': '\uE3DB',
'filter_center_focus': '\uE3DC',
'filter_drama': '\uE3DD',
'filter_frames': '\uE3DE',
'filter_hdr': '\uE3DF',
'filter_list': '\uE152',
'filter_none': '\uE3E0',
'filter_tilt_shift': '\uE3E2',
'filter_vintage': '\uE3E3',
'find_in_page': '\uE880',
'find_replace': '\uE881',
'fingerprint': '\uE90D',
'first_page': '\uE5DC',
'fitness_center': '\uEB43',
'flag': '\uE153',
'flare': '\uE3E4',
'flash_auto': '\uE3E5',
'flash_off': '\uE3E6',
'flash_on': '\uE3E7',
'flight': '\uE539',
'flight_land': '\uE904',
'flight_takeoff': '\uE905',
'flip': '\uE3E8',
'flip_to_back': '\uE882',
'flip_to_front': '\uE883',
'folder': '\uE2C7',
'folder_open': '\uE2C8',
'folder_shared': '\uE2C9',
'folder_special': '\uE617',
'font_download': '\uE167',
'format_align_center': '\uE234',
'format_align_justify': '\uE235',
'format_align_left': '\uE236',
'format_align_right': '\uE237',
'format_bold': '\uE238',
'format_clear': '\uE239',
'format_color_fill': '\uE23A',
'format_color_reset': '\uE23B',
'format_color_text': '\uE23C',
'format_indent_decrease': '\uE23D',
'format_indent_increase': '\uE23E',
'format_italic': '\uE23F',
'format_line_spacing': '\uE240',
'format_list_bulleted': '\uE241',
'format_list_numbered': '\uE242',
'format_paint': '\uE243',
'format_quote': '\uE244',
'format_shapes': '\uE25E',
'format_size': '\uE245',
'format_strikethrough': '\uE246',
'format_textdirection_l_to_r': '\uE247',
'format_textdirection_r_to_l': '\uE248',
'format_underlined': '\uE249',
'forum': '\uE0BF',
'forward': '\uE154',
'forward_10': '\uE056',
'forward_30': '\uE057',
'forward_5': '\uE058',
'free_breakfast': '\uEB44',
'fullscreen': '\uE5D0',
'fullscreen_exit': '\uE5D1',
'functions': '\uE24A',
'g_translate': '\uE927',
'gamepad': '\uE30F',
'games': '\uE021',
'gavel': '\uE90E',
'gesture': '\uE155',
'get_app': '\uE884',
'gif': '\uE908',
'golf_course': '\uEB45',
'gps_fixed': '\uE1B3',
'gps_not_fixed': '\uE1B4',
'gps_off': '\uE1B5',
'grade': '\uE885',
'gradient': '\uE3E9',
'grain': '\uE3EA',
'graphic_eq': '\uE1B8',
'grid_off': '\uE3EB',
'grid_on': '\uE3EC',
'group': '\uE7EF',
'group_add': '\uE7F0',
'group_work': '\uE886',
'hd': '\uE052',
'hdr_off': '\uE3ED',
'hdr_on': '\uE3EE',
'hdr_strong': '\uE3F1',
'hdr_weak': '\uE3F2',
'headset': '\uE310',
'headset_mic': '\uE311',
'healing': '\uE3F3',
'hearing': '\uE023',
'help': '\uE887',
'help_outline': '\uE8FD',
'high_quality': '\uE024',
'highlight': '\uE25F',
'highlight_off': '\uE888',
'history': '\uE889',
'home': '\uE88A',
'hot_tub': '\uEB46',
'hotel': '\uE53A',
'hourglass_empty': '\uE88B',
'hourglass_full': '\uE88C',
'http': '\uE902',
'https': '\uE88D',
'image': '\uE3F4',
'image_aspect_ratio': '\uE3F5',
'import_contacts': '\uE0E0',
'import_export': '\uE0C3',
'important_devices': '\uE912',
'inbox': '\uE156',
'indeterminate_check_box': '\uE909',
'info': '\uE88E',
'info_outline': '\uE88F',
'input': '\uE890',
'insert_chart': '\uE24B',
'insert_comment': '\uE24C',
'insert_drive_file': '\uE24D',
'insert_emoticon': '\uE24E',
'insert_invitation': '\uE24F',
'insert_link': '\uE250',
'insert_photo': '\uE251',
'invert_colors': '\uE891',
'invert_colors_off': '\uE0C4',
'iso': '\uE3F6',
'keyboard': '\uE312',
'keyboard_arrow_down': '\uE313',
'keyboard_arrow_left': '\uE314',
'keyboard_arrow_right': '\uE315',
'keyboard_arrow_up': '\uE316',
'keyboard_backspace': '\uE317',
'keyboard_capslock': '\uE318',
'keyboard_hide': '\uE31A',
'keyboard_return': '\uE31B',
'keyboard_tab': '\uE31C',
'keyboard_voice': '\uE31D',
'kitchen': '\uEB47',
'label': '\uE892',
'label_outline': '\uE893',
'landscape': '\uE3F7',
'language': '\uE894',
'laptop': '\uE31E',
'laptop_chromebook': '\uE31F',
'laptop_mac': '\uE320',
'laptop_windows': '\uE321',
'last_page': '\uE5DD',
'launch': '\uE895',
'layers': '\uE53B',
'layers_clear': '\uE53C',
'leak_add': '\uE3F8',
'leak_remove': '\uE3F9',
'lens': '\uE3FA',
'library_add': '\uE02E',
'library_books': '\uE02F',
'library_music': '\uE030',
'lightbulb_outline': '\uE90F',
'line_style': '\uE919',
'line_weight': '\uE91A',
'linear_scale': '\uE260',
'link': '\uE157',
'linked_camera': '\uE438',
'list': '\uE896',
'live_help': '\uE0C6',
'live_tv': '\uE639',
'local_activity': '\uE53F',
'local_airport': '\uE53D',
'local_atm': '\uE53E',
'local_bar': '\uE540',
'local_cafe': '\uE541',
'local_car_wash': '\uE542',
'local_convenience_store': '\uE543',
'local_dining': '\uE556',
'local_drink': '\uE544',
'local_florist': '\uE545',
'local_gas_station': '\uE546',
'local_grocery_store': '\uE547',
'local_hospital': '\uE548',
'local_hotel': '\uE549',
'local_laundry_service': '\uE54A',
'local_library': '\uE54B',
'local_mall': '\uE54C',
'local_movies': '\uE54D',
'local_offer': '\uE54E',
'local_parking': '\uE54F',
'local_pharmacy': '\uE550',
'local_phone': '\uE551',
'local_pizza': '\uE552',
'local_play': '\uE553',
'local_post_office': '\uE554',
'local_printshop': '\uE555',
'local_see': '\uE557',
'local_shipping': '\uE558',
'local_taxi': '\uE559',
'location_city': '\uE7F1',
'location_disabled': '\uE1B6',
'location_off': '\uE0C7',
'location_on': '\uE0C8',
'location_searching': '\uE1B7',
'lock': '\uE897',
'lock_open': '\uE898',
'lock_outline': '\uE899',
'looks': '\uE3FC',
'looks_3': '\uE3FB',
'looks_4': '\uE3FD',
'looks_5': '\uE3FE',
'looks_6': '\uE3FF',
'looks_one': '\uE400',
'looks_two': '\uE401',
'loop': '\uE028',
'loupe': '\uE402',
'low_priority': '\uE16D',
'loyalty': '\uE89A',
'mail': '\uE158',
'mail_outline': '\uE0E1',
'map': '\uE55B',
'markunread': '\uE159',
'markunread_mailbox': '\uE89B',
'memory': '\uE322',
'menu': '\uE5D2',
'merge_type': '\uE252',
'message': '\uE0C9',
'mic': '\uE029',
'mic_none': '\uE02A',
'mic_off': '\uE02B',
'mms': '\uE618',
'mode_comment': '\uE253',
'mode_edit': '\uE254',
'monetization_on': '\uE263',
'money_off': '\uE25C',
'monochrome_photos': '\uE403',
'mood': '\uE7F2',
'mood_bad': '\uE7F3',
'more': '\uE619',
'more_horiz': '\uE5D3',
'more_vert': '\uE5D4',
'motorcycle': '\uE91B',
'mouse': '\uE323',
'move_to_inbox': '\uE168',
'movie': '\uE02C',
'movie_creation': '\uE404',
'movie_filter': '\uE43A',
'multiline_chart': '\uE6DF',
'music_note': '\uE405',
'music_video': '\uE063',
'nature': '\uE406',
'nature_people': '\uE407',
'navigate_before': '\uE408',
'navigate_next': '\uE409',
'navigation': '\uE55D',
'near_me': '\uE569',
'network_cell': '\uE1B9',
'network_check': '\uE640',
'network_locked': '\uE61A',
'network_wifi': '\uE1BA',
'new_releases': '\uE031',
'next_week': '\uE16A',
'nfc': '\uE1BB',
'no_encryption': '\uE641',
'no_sim': '\uE0CC',
'not_interested': '\uE033',
'note': '\uE06F',
'note_add': '\uE89C',
'notifications': '\uE7F4',
'notifications_active': '\uE7F7',
'notifications_none': '\uE7F5',
'notifications_off': '\uE7F6',
'notifications_paused': '\uE7F8',
'offline_pin': '\uE90A',
'ondemand_video': '\uE63A',
'opacity': '\uE91C',
'open_in_browser': '\uE89D',
'open_in_new': '\uE89E',
'open_with': '\uE89F',
'pages': '\uE7F9',
'pageview': '\uE8A0',
'palette': '\uE40A',
'pan_tool': '\uE925',
'panorama': '\uE40B',
'panorama_fish_eye': '\uE40C',
'panorama_horizontal': '\uE40D',
'panorama_vertical': '\uE40E',
'panorama_wide_angle': '\uE40F',
'party_mode': '\uE7FA',
'pause': '\uE034',
'pause_circle_filled': '\uE035',
'pause_circle_outline': '\uE036',
'payment': '\uE8A1',
'people': '\uE7FB',
'people_outline': '\uE7FC',
'perm_camera_mic': '\uE8A2',
'perm_contact_calendar': '\uE8A3',
'perm_data_setting': '\uE8A4',
'perm_device_information': '\uE8A5',
'perm_identity': '\uE8A6',
'perm_media': '\uE8A7',
'perm_phone_msg': '\uE8A8',
'perm_scan_wifi': '\uE8A9',
'person': '\uE7FD',
'person_add': '\uE7FE',
'person_outline': '\uE7FF',
'person_pin': '\uE55A',
'person_pin_circle': '\uE56A',
'personal_video': '\uE63B',
'pets': '\uE91D',
'phone': '\uE0CD',
'phone_android': '\uE324',
'phone_bluetooth_speaker': '\uE61B',
'phone_forwarded': '\uE61C',
'phone_in_talk': '\uE61D',
'phone_iphone': '\uE325',
'phone_locked': '\uE61E',
'phone_missed': '\uE61F',
'phone_paused': '\uE620',
'phonelink': '\uE326',
'phonelink_erase': '\uE0DB',
'phonelink_lock': '\uE0DC',
'phonelink_off': '\uE327',
'phonelink_ring': '\uE0DD',
'phonelink_setup': '\uE0DE',
'photo': '\uE410',
'photo_album': '\uE411',
'photo_camera': '\uE412',
'photo_filter': '\uE43B',
'photo_library': '\uE413',
'photo_size_select_actual': '\uE432',
'photo_size_select_large': '\uE433',
'photo_size_select_small': '\uE434',
'picture_as_pdf': '\uE415',
'picture_in_picture': '\uE8AA',
'picture_in_picture_alt': '\uE911',
'pie_chart': '\uE6C4',
'pie_chart_outlined': '\uE6C5',
'pin_drop': '\uE55E',
'place': '\uE55F',
'play_arrow': '\uE037',
'play_circle_filled': '\uE038',
'play_circle_outline': '\uE039',
'play_for_work': '\uE906',
'playlist_add': '\uE03B',
'playlist_add_check': '\uE065',
'playlist_play': '\uE05F',
'plus_one': '\uE800',
'poll': '\uE801',
'polymer': '\uE8AB',
'pool': '\uEB48',
'portable_wifi_off': '\uE0CE',
'portrait': '\uE416',
'power': '\uE63C',
'power_input': '\uE336',
'power_settings_new': '\uE8AC',
'pregnant_woman': '\uE91E',
'present_to_all': '\uE0DF',
'print': '\uE8AD',
'priority_high': '\uE645',
'public': '\uE80B',
'publish': '\uE255',
'query_builder': '\uE8AE',
'question_answer': '\uE8AF',
'queue': '\uE03C',
'queue_music': '\uE03D',
'queue_play_next': '\uE066',
'radio': '\uE03E',
'radio_button_checked': '\uE837',
'radio_button_unchecked': '\uE836',
'rate_review': '\uE560',
'receipt': '\uE8B0',
'recent_actors': '\uE03F',
'record_voice_over': '\uE91F',
'redeem': '\uE8B1',
'redo': '\uE15A',
'refresh': '\uE5D5',
'remove': '\uE15B',
'remove_circle': '\uE15C',
'remove_circle_outline': '\uE15D',
'remove_from_queue': '\uE067',
'remove_red_eye': '\uE417',
'remove_shopping_cart': '\uE928',
'reorder': '\uE8FE',
'repeat': '\uE040',
'repeat_one': '\uE041',
'replay': '\uE042',
'replay_10': '\uE059',
'replay_30': '\uE05A',
'replay_5': '\uE05B',
'reply': '\uE15E',
'reply_all': '\uE15F',
'report': '\uE160',
'report_problem': '\uE8B2',
'restaurant': '\uE56C',
'restaurant_menu': '\uE561',
'restore': '\uE8B3',
'restore_page': '\uE929',
'ring_volume': '\uE0D1',
'room': '\uE8B4',
'room_service': '\uEB49',
'rotate_90_degrees_ccw': '\uE418',
'rotate_left': '\uE419',
'rotate_right': '\uE41A',
'rounded_corner': '\uE920',
'router': '\uE328',
'rowing': '\uE921',
'rss_feed': '\uE0E5',
'rv_hookup': '\uE642',
'satellite': '\uE562',
'save': '\uE161',
'scanner': '\uE329',
'schedule': '\uE8B5',
'school': '\uE80C',
'screen_lock_landscape': '\uE1BE',
'screen_lock_portrait': '\uE1BF',
'screen_lock_rotation': '\uE1C0',
'screen_rotation': '\uE1C1',
'screen_share': '\uE0E2',
'sd_card': '\uE623',
'sd_storage': '\uE1C2',
'search': '\uE8B6',
'security': '\uE32A',
'select_all': '\uE162',
'send': '\uE163',
'sentiment_dissatisfied': '\uE811',
'sentiment_neutral': '\uE812',
'sentiment_satisfied': '\uE813',
'sentiment_very_dissatisfied': '\uE814',
'sentiment_very_satisfied': '\uE815',
'settings': '\uE8B8',
'settings_applications': '\uE8B9',
'settings_backup_restore': '\uE8BA',
'settings_bluetooth': '\uE8BB',
'settings_brightness': '\uE8BD',
'settings_cell': '\uE8BC',
'settings_ethernet': '\uE8BE',
'settings_input_antenna': '\uE8BF',
'settings_input_component': '\uE8C0',
'settings_input_composite': '\uE8C1',
'settings_input_hdmi': '\uE8C2',
'settings_input_svideo': '\uE8C3',
'settings_overscan': '\uE8C4',
'settings_phone': '\uE8C5',
'settings_power': '\uE8C6',
'settings_remote': '\uE8C7',
'settings_system_daydream': '\uE1C3',
'settings_voice': '\uE8C8',
'share': '\uE80D',
'shop': '\uE8C9',
'shop_two': '\uE8CA',
'shopping_basket': '\uE8CB',
'shopping_cart': '\uE8CC',
'short_text': '\uE261',
'show_chart': '\uE6E1',
'shuffle': '\uE043',
'signal_cellular_4_bar': '\uE1C8',
'signal_cellular_connected_no_internet_4_bar': '\uE1CD',
'signal_cellular_no_sim': '\uE1CE',
'signal_cellular_null': '\uE1CF',
'signal_cellular_off': '\uE1D0',
'signal_wifi_4_bar': '\uE1D8',
'signal_wifi_4_bar_lock': '\uE1D9',
'signal_wifi_off': '\uE1DA',
'sim_card': '\uE32B',
'sim_card_alert': '\uE624',
'skip_next': '\uE044',
'skip_previous': '\uE045',
'slideshow': '\uE41B',
'slow_motion_video': '\uE068',
'smartphone': '\uE32C',
'smoke_free': '\uEB4A',
'smoking_rooms': '\uEB4B',
'sms': '\uE625',
'sms_failed': '\uE626',
'snooze': '\uE046',
'sort': '\uE164',
'sort_by_alpha': '\uE053',
'spa': '\uEB4C',
'space_bar': '\uE256',
'speaker': '\uE32D',
'speaker_group': '\uE32E',
'speaker_notes': '\uE8CD',
'speaker_notes_off': '\uE92A',
'speaker_phone': '\uE0D2',
'spellcheck': '\uE8CE',
'star': '\uE838',
'star_border': '\uE83A',
'star_half': '\uE839',
'stars': '\uE8D0',
'stay_current_landscape': '\uE0D3',
'stay_current_portrait': '\uE0D4',
'stay_primary_landscape': '\uE0D5',
'stay_primary_portrait': '\uE0D6',
'stop': '\uE047',
'stop_screen_share': '\uE0E3',
'storage': '\uE1DB',
'store': '\uE8D1',
'store_mall_directory': '\uE563',
'straighten': '\uE41C',
'streetview': '\uE56E',
'strikethrough_s': '\uE257',
'style': '\uE41D',
'subdirectory_arrow_left': '\uE5D9',
'subdirectory_arrow_right': '\uE5DA',
'subject': '\uE8D2',
'subscriptions': '\uE064',
'subtitles': '\uE048',
'subway': '\uE56F',
'supervisor_account': '\uE8D3',
'surround_sound': '\uE049',
'swap_calls': '\uE0D7',
'swap_horiz': '\uE8D4',
'swap_vert': '\uE8D5',
'swap_vertical_circle': '\uE8D6',
'switch_camera': '\uE41E',
'switch_video': '\uE41F',
'sync': '\uE627',
'sync_disabled': '\uE628',
'sync_problem': '\uE629',
'system_update': '\uE62A',
'system_update_alt': '\uE8D7',
'tab': '\uE8D8',
'tab_unselected': '\uE8D9',
'tablet': '\uE32F',
'tablet_android': '\uE330',
'tablet_mac': '\uE331',
'tag_faces': '\uE420',
'tap_and_play': '\uE62B',
'terrain': '\uE564',
'text_fields': '\uE262',
'text_format': '\uE165',
'textsms': '\uE0D8',
'texture': '\uE421',
'theaters': '\uE8DA',
'thumb_down': '\uE8DB',
'thumb_up': '\uE8DC',
'thumbs_up_down': '\uE8DD',
'time_to_leave': '\uE62C',
'timelapse': '\uE422',
'timeline': '\uE922',
'timer': '\uE425',
'timer_10': '\uE423',
'timer_3': '\uE424',
'timer_off': '\uE426',
'title': '\uE264',
'toc': '\uE8DE',
'today': '\uE8DF',
'toll': '\uE8E0',
'tonality': '\uE427',
'touch_app': '\uE913',
'toys': '\uE332',
'track_changes': '\uE8E1',
'traffic': '\uE565',
'train': '\uE570',
'tram': '\uE571',
'transfer_within_a_station': '\uE572',
'transform': '\uE428',
'translate': '\uE8E2',
'trending_down': '\uE8E3',
'trending_flat': '\uE8E4',
'trending_up': '\uE8E5',
'tune': '\uE429',
'turned_in': '\uE8E6',
'turned_in_not': '\uE8E7',
'tv': '\uE333',
'unarchive': '\uE169',
'undo': '\uE166',
'unfold_less': '\uE5D6',
'unfold_more': '\uE5D7',
'update': '\uE923',
'usb': '\uE1E0',
'verified_user': '\uE8E8',
'vertical_align_bottom': '\uE258',
'vertical_align_center': '\uE259',
'vertical_align_top': '\uE25A',
'vibration': '\uE62D',
'video_call': '\uE070',
'video_label': '\uE071',
'video_library': '\uE04A',
'videocam': '\uE04B',
'videocam_off': '\uE04C',
'videogame_asset': '\uE338',
'view_agenda': '\uE8E9',
'view_array': '\uE8EA',
'view_carousel': '\uE8EB',
'view_column': '\uE8EC',
'view_comfy': '\uE42A',
'view_compact': '\uE42B',
'view_day': '\uE8ED',
'view_headline': '\uE8EE',
'view_list': '\uE8EF',
'view_module': '\uE8F0',
'view_quilt': '\uE8F1',
'view_stream': '\uE8F2',
'view_week': '\uE8F3',
'vignette': '\uE435',
'visibility': '\uE8F4',
'visibility_off': '\uE8F5',
'voice_chat': '\uE62E',
'voicemail': '\uE0D9',
'volume_down': '\uE04D',
'volume_mute': '\uE04E',
'volume_off': '\uE04F',
'volume_up': '\uE050',
'vpn_key': '\uE0DA',
'vpn_lock': '\uE62F',
'wallpaper': '\uE1BC',
'warning': '\uE002',
'watch': '\uE334',
'watch_later': '\uE924',
'wb_auto': '\uE42C',
'wb_cloudy': '\uE42D',
'wb_incandescent': '\uE42E',
'wb_iridescent': '\uE436',
'wb_sunny': '\uE430',
'wc': '\uE63D',
'web': '\uE051',
'web_asset': '\uE069',
'weekend': '\uE16B',
'whatshot': '\uE80E',
'widgets': '\uE1BD',
'wifi': '\uE63E',
'wifi_lock': '\uE1E1',
'wifi_tethering': '\uE1E2',
'work': '\uE8F9',
'wrap_text': '\uE25B',
'youtube_searched_for': '\uE8FA',
'zoom_in': '\uE8FF',
'zoom_out': '\uE900',
'zoom_out_map': '\uE56B',
'signal_cellular_0_bar': '\uE1C8',
'signal_cellular_1_bar': '\uE1C9',
'signal_cellular_2_bar': '\uE1CA',
'signal_cellular_3_bar': '\uE1CB',
'signal_wifi_0_bar': '\uE1D8',
'signal_wifi_1_bar': '\uE1D5',
'signal_wifi_2_bar': '\uE1D6',
'signal_wifi_3_bar': '\uE1D7',
'battery_20': '\uE1A5',
'battery_30': '\uE1A6',
'battery_50': '\uE1A7',
'battery_60': '\uE1A8',
'battery_80': '\uE1A9',
'battery_90': '\uE1AA',
'score': '\uE269',
'text_rotate_up': '\uE93A',
'text_rotate_vertical': '\uE93B',
'text_rotation_down': '\uE93C',
'text_rotation_none': '\uE93D',

}

// Identificar a biblioteca baseada no prefixo do nome do Ã­cone
function getIconLibrary(iconName: string): string {
  if (iconName.startsWith('fa-') || iconName.startsWith('fas ') || 
      iconName.startsWith('far ') || iconName.startsWith('fab ')) {
    return 'fontawesome';
  } else if (iconName.startsWith('ion-')) {
    return 'ionicons';
  } else if (iconName.startsWith('eva-')) {
    return 'eva';
  } else if (iconName.startsWith('ti-')) {
    return 'themify';
  } else if (iconName.startsWith('la-')) {
    return 'lineawesome';
  } else if (iconName.startsWith('mdi-')) {
    return 'mdi';
  } else {
    return 'material'; // PadrÃ£o do Quasar
  }
}

// Remover prefixos para obter o nome normalizado do Ã­cone
function normalizeIconName(iconName: string): string {
  // Remover prefixos conhecidos
  const prefixes = ['fa-', 'fas ', 'far ', 'fab ', 'ion-', 'eva-', 'ti-', 'la-', 'mdi-'];
  
  let normalizedName = iconName;
  for (const prefix of prefixes) {
    if (normalizedName.startsWith(prefix)) {
      normalizedName = normalizedName.substring(prefix.length);
      break;
    }
  }
  
  return normalizedName;
}

// Mapear o nome do Ã­cone para o caractere Unicode
function getIconUnicode(library: string, iconName: string): string {
  // Para Material Design Icons
  if (library === 'material' && materialIconsMap[iconName]) {
    return materialIconsMap[iconName];
  }
  
  // Fallback para um Ã­cone genÃ©rico
  return '\uE5CD'; // close icon como fallback
}

/**
 * Processa um componente de Ã­cone Quasar (q-icon)
 */
export async function processIconComponent(node: QuasarNode, settings: PluginSettings): Promise<FrameNode> {
  logDebug('icon', `Processando Ã­cone: ${JSON.stringify(node.attributes)}`);
  
  const iconFrame = figma.createFrame();
  iconFrame.name = "q-icon";
  
  // Extrair propriedades e estilos
  const { props, styles } = extractStylesAndProps(node);
  
  // Determinar tamanho do Ã­cone
  let iconSize = 24; // Tamanho padrÃ£o
  
  if (props.size) {
    // Converter tamanhos nomeados para pixels
    switch (props.size) {
      case 'xs': iconSize = 16; break;
      case 'sm': iconSize = 20; break;
      case 'md': iconSize = 24; break;
      case 'lg': iconSize = 32; break;
      case 'xl': iconSize = 40; break;
      default:
        // Verificar se Ã© um valor numÃ©rico em pixels
        const sizeMatch = props.size.match(/^(\d+)(px)?$/);
        if (sizeMatch) {
          iconSize = parseInt(sizeMatch[1]);
        }
    }
  }
  
  // Configurar o frame
  iconFrame.resize(iconSize, iconSize);
  iconFrame.layoutMode = "HORIZONTAL";
  iconFrame.primaryAxisAlignItems = "CENTER";
  iconFrame.counterAxisAlignItems = "CENTER";
  iconFrame.fills = [{ type: 'SOLID', color: { r: 0, g: 0, b: 0 }, opacity: 0 }];
  
  // Determinar cor do Ã­cone
  let iconColor = { r: 0, g: 0, b: 0 }; // Preto por padrÃ£o
  
  if (props.color && quasarColors[props.color] && settings.preserveQuasarColors) {
    iconColor = quasarColors[props.color];
  }
  
  // Extrair nome do Ã­cone
  let iconName = props.name || "";
  
  if (!iconName && node.attributes && node.attributes.class) {
    // Alguns Ã­cones sÃ£o definidos pela classe, como "fas fa-home"
    const classNames = node.attributes.class.split(" ");
    for (const className of classNames) {
      if (className.startsWith("fa-")) {
        iconName = className.substring(3);
        break;
      }
    }
  }
  
  try {
    // Identificar biblioteca e nome normalizado do Ã­cone
    const iconLib = getIconLibrary(iconName);
    const normalizedName = normalizeIconName(iconName);
    
    logDebug('icon', `Biblioteca: ${iconLib}, Nome normalizado: ${normalizedName}`);
    
    // Carregar fonte do Material Icons
    await figma.loadFontAsync({ family: "Material Icons", style: "Regular" });
    
    // Criar nÃ³ de texto para o Ã­cone
    const iconText = figma.createText();
    iconText.name = "icon-text";
    
    // Obter o caractere Unicode para o Ã­cone
    const iconUnicode = getIconUnicode(iconLib, normalizedName);
    iconText.characters = iconUnicode;
    
    // MUDANÃA AQUI: Definir explicitamente a fonte Material Icons
    iconText.fontName = { family: "Material Icons", style: "Regular" };
    
    // Aplicar cor e tamanho
    iconText.fills = [{ type: 'SOLID', color: iconColor }];
    iconText.fontSize = iconSize;
    iconText.textAlignHorizontal = "CENTER";
    iconText.textAlignVertical = "CENTER";
    
    iconFrame.appendChild(iconText);
    
  } catch (error) {
    logDebug('icon', `Erro ao processar Ã­cone: ${error}`);
    
    // Fallback: Criar um retÃ¢ngulo colorido como placeholder
    const iconPlaceholder = figma.createRectangle();
    iconPlaceholder.name = `icon-placeholder-${iconName || "unknown"}`;
    iconPlaceholder.resize(iconSize * 0.7, iconSize * 0.7);
    iconPlaceholder.cornerRadius = iconSize * 0.35;
    iconPlaceholder.fills = [{ type: 'SOLID', color: iconColor }];
    
    iconFrame.appendChild(iconPlaceholder);
  }
  
  return iconFrame;
}

// Exportar funÃ§Ãµes utilitÃ¡rias para uso em outros componentes
export {
  getIconLibrary,
  normalizeIconName,
  getIconUnicode,
  materialIconsMap
};